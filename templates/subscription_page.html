{% load static %}
{% include 'header.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Subscription Packages</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #182848, #007bff);
      color: #fff;
      font-family: 'Poppins', sans-serif;
    }

    
    .plan-card {
      background: #fff;
      color: #182848;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 25px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .plan-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    .btn-subscribe {
      border-radius: 30px;
      font-weight: 600;
    }

    .subsec{
      margin-top: 15rem;
    }
  </style>
</head>
<body>

   <!-- Loader -->
    <div id="preloader">
        <div id="status">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>

 

<section class="text-center py-5 subsec">
  <div class="container">
    <h1 class="fw-bold mb-3">Subscription Packages</h1>
    <p class="lead">Choose your plan and enjoy premium access to verified opportunities.</p>
  </div>
</section>

<div class="container py-5" id="candidate-section">
  <h2 class="text-center fw-bold mb-4">Candidate Plans</h2>
  <div class="row g-4">
    {% for plan in candidate_plans %}
    <div class="col-md-6 col-lg-3">
      <div class="plan-card h-100 text-center">
        <h5 class="fw-bold">{{ plan.title }}</h5>
        <h3 class="text-primary fw-bold">{{ plan.price }}</h3>
        <p class="text-muted">{{ plan.duration }}</p>
        <form action="{% url 'start_subscription' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name="amount" value="{{ plan.amount }}">
          <input type="hidden" name="plan_name" value="{{ plan.plan_name }}">
          <button type="submit" name="gateway" value="paystack" class="btn btn-primary btn-subscribe w-100 mb-2">
            Pay with Paystack
          </button>
          <button type="submit" name="gateway" value="flutterwave" class="btn btn-outline-primary btn-subscribe w-100">
            Pay with Flutterwave
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div class="container py-5" id="employer-section">
  <h2 class="text-center fw-bold my-5">Employer Plans</h2>
  <div class="row g-4">
    {% for plan in employer_plans %}
    <div class="col-md-6 col-lg-3">
      <div class="plan-card h-100 text-center">
        <h5 class="fw-bold">{{ plan.title }}</h5>
        <h3 class="text-primary fw-bold">{{ plan.price }}</h3>
        <p class="text-muted">{{ plan.duration }}</p>
        <form action="{% url 'start_subscription' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name="amount" value="{{ plan.amount }}">
          <input type="hidden" name="plan_name" value="{{ plan.plan_name }}">
          <button type="submit" name="gateway" value="paystack" class="btn btn-primary btn-subscribe w-100 mb-2">
            Pay with Paystack
          </button>
          <button type="submit" name="gateway" value="flutterwave" class="btn btn-outline-primary btn-subscribe w-100">
            Pay with Flutterwave
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


{% include 'footer.html' %}

<script>
  document.addEventListener("DOMContentLoaded", function() {
      const userType = "{{ user_type }}";  // passed from the view

      if (userType === "chef") {
          document.getElementById("employer-section").style.display = "none";
      } else if (userType === "employer") {
          document.getElementById("candidate-section").style.display = "none";
      }
  });
</script>

</body>
</html>
