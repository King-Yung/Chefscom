{% load static %}
{% load widget_tweaks %}
{% include 'header.html' %}

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>I Need a Chef | chefs.com.ng</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/needstaff.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css" />

  <style>
    .form-label, .form-check-label { font-weight: bold !important; font-style: italic !important; }
    span { color: red !important; }
    .checkbox-inline-group .form-check {
    display: flex !important;
    align-items: center;
    margin-right: 1rem;
    margin-bottom: 0 !important;
    padding-left: 0 !important;
}

.checkbox-inline-group .form-check-input {
    margin: 0;
}

.checkbox-inline-group .form-check-label {
    margin-left: 0.3rem;
}
    .form-check-input { cursor: pointer; }
    .form-check-label { cursor: pointer; margin-left: 0.3rem; }
    .currency-input { display: flex; align-items: center; }
    .currency-input span { margin-right: 0.5rem; font-weight: bold; }

    .caph5{
    font-size: 0.9rem;
    color: red;
  }
  

  .activar{
  color: rgb(100, 141, 230) !important;
  font-weight: bold !important;
}

/* ========================================
   MOBILE (max-width: 600px)
   ======================================== */
@media (max-width: 600px) {

  .needhome {
    height: 55vh !important;
    padding: 0 1rem !important;
  }

  .bg-home h1 {
    font-size: 1.6rem !important;
    line-height: 1.3 !important;
    margin-top: 0.5rem !important;
  }

  .bg-home h5 {
    font-size: 0.9rem !important;
    margin-top: 1.5rem !important;
  }

  .checkbox-inline-group {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 0.5rem !important;
  }

  .checkbox-group {
    flex-direction: column !important;
  }

  .form-label,
  .form-check-label {
    font-size: 0.9rem !important;
  }

  .form-control {
    font-size: 0.95rem !important;
  }

  .btn-primary {
    width: 100% !important;
    font-size: 1rem !important;
  }

  .h55{
    font-size: 1rem !important;
    margin-top: 20rem !important;
  }

  .h11{
    font-size: 1rem !important;
    margin-top: 1rem !important;
  }

  
}



/* ========================================
   TABLET (600px – 991px)
   ======================================== */
@media (min-width: 600px) and (max-width: 991px) {

  .needhome {
    height: 70vh !important;
  }

  .bg-home h1 {
    font-size: 1.9rem !important;
  }

  .bg-home h5 {
    font-size: 1rem !important;
  }

  .checkbox-inline-group {
    gap: 0.7rem !important;
    flex-wrap: wrap !important;
  }

  .form-control {
    font-size: 1rem !important;
  }

  .h55{
    font-size: 1rem !important;
    margin-top: 20rem !important;
  }

  .h11{
    font-size: 1rem !important;
    margin-top: 1rem !important;
  }
}



/* ========================================
   DESKTOP LARGE SCREENS (min-width: 1200px)
   ======================================== */
@media (min-width: 1200px) {

  .needhome {
    height: 150vh !important;
  }

  .bg-home h1 {
    font-size: 2.6rem !important;
  }

  .bg-home h5 {
    font-size: 1.3rem !important;
  }

  .form-label,
  .form-check-label {
    font-size: 1.1rem !important;
  }

  .checkbox-inline-group {
    gap: 1.2rem !important;
  }

  .form-control {
    font-size: 1.1rem !important;
    padding: 0.7rem 1rem !important;
  }

  .h55 { font-size: 1rem !important; margin-top: -5rem !important; }
  .h11 { font-size: 1rem !important; margin-top: 1rem !important; }
  

}
  </style>
</head>

<body>

<!-- Loader -->
    <div id="preloader">
        <div id="status">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>
    <!-- Loader -->

<section class="bg-home needhome">
  <div class="bg-overlay"></div>
  <div class="home-center d-flex align-items-center">
    <div class="container contain text-center text-white dyv">
      <h5 class="small-title text-uppercase mb-3 h55">I'm an Employer — I Need a Chef!</h5>
      <h1 class="heading fw-bold mb-4 h11">
        Finding an experienced Chef can be quite stressful. We recruit chefs of all levels — temporary or permanent, and ensure they fit your job specification.
      </h1>
    </div>
  </div>
</section>

<div class="container my-5">
  <h6>Note: This registration window is open to residents of Nigeria only.</h6>
</div>

<div class="container my-5">
  <h3>Employer Registration Form</h3>
  <p class="lead">Please complete all the fields to register your company and job requirements.</p>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      {% if messages %}
        {% for m in messages %}
          <div class="alert alert-{{ m.tags }}">{{ m }}</div>
        {% endfor %}
      {% endif %}

      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        <div class="row g-3">

          <!-- Company Name -->
          <div class="col-md-6 mb-3">
            <label class="form-label">{{ form.company_name.label_tag }} <span>*</span></label>
            {{ form.company_name|add_class:"form-control" }}
            {% if form.company_name.errors %}
              <div class="text-danger small">{{ form.company_name.errors }}</div>
            {% endif %}
          </div>

          <!-- Establishment Type -->
          <div class="col-md-6 mb-3">
            <label class="form-label">{{ form.establishment_type.label_tag }} <span>*</span></label>
            {{ form.establishment_type|add_class:"form-control" }}
            {% if form.establishment_type.errors %}
              <div class="text-danger small">{{ form.establishment_type.errors }}</div>
            {% endif %}
          </div>

          <!-- Country -->
          <div class="col-md-6 mb-3">
            <label class="form-label">{{ form.nationality.label_tag }} <span>*</span></label>
            {{ form.nationality|add_class:"form-select" }}
            {% if form.nationality.errors %}
              <div class="text-danger small">{{ form.nationality.errors }}</div>
            {% endif %}
          </div>

          <!-- State -->
          <div class="col-md-6 mb-3">
            <label class="form-label">{{ form.state_of_residence.label_tag }} <span>*</span></label>
            {{ form.state_of_residence|add_class:"form-select" }}
            {% if form.state_of_residence.errors %}
              <div class="text-danger small">{{ form.state_of_residence.errors }}</div>
            {% endif %}
          </div>

          <!-- Company Address -->
          <div class="col-12 mb-3">
            <label class="form-label">{{ form.company_address.label_tag }} <span>*</span></label>
            {{ form.company_address|add_class:"form-control" }}
            {% if form.company_address.errors %}
              <div class="text-danger small">{{ form.company_address.errors }}</div>
            {% endif %}
          </div>

          <!-- Loop over other fields -->
          {% for field in form %}
            {% if field.name not in "company_name establishment_type nationality state_of_residence company_address captcha" %}
              <div class="col-md-6 mb-3">
                <label class="form-label">{{ field.label_tag }} {% if field.field.required %}<span>*</span>{% endif %}</label>

                {% if field.name == "job_positions" or field.name == "employment_type" %}
                  <div class="checkbox-inline-group">
                    {% for choice in field.field.choices %}
                      <div class="form-check">
                        <input type="checkbox" class="form-check-input" name="{{ field.html_name }}" value="{{ choice.0 }}" {% if choice.0 in field.value %}checked{% endif %}>
                        <label class="form-check-label">{{ choice.1 }}</label>
                      </div>
                    {% endfor %}
                  </div>
                  {% if field.name == "job_positions" %}
                    <div id="job-positions-other" style="display:none; margin-top:0.5rem;">
                      <input type="text" class="form-control" name="job_positions_other" placeholder="Fill if other Position selected">
                    </div>
                  {% endif %}

                {% elif field.name == "meals_accommodation" %}
                  <div class="checkbox-inline-group">
                    {% for choice in field.field.choices %}
                      <div class="form-check">
                        <input type="checkbox" class="form-check-input" name="{{ field.html_name }}" value="{{ choice.0 }}" {% if choice.0 in field.value %}checked{% endif %}>
                        <label class="form-check-label">{{ choice.1 }}</label>
                      </div>
                    {% endfor %}
                  </div>

                {% elif field.name == "salary_range" %}
                  <div class="currency-input">
                    <span>₦</span>
                    {{ field|add_class:"form-control" }}
                  </div>

                {% elif field.name == "contact_phone" %}
                  <div class="fone">
                    {{ field|add_class:"form-control" }}
                  </div>

                {% else %}
                  {{ field|add_class:"form-control" }}
                {% endif %}

                {% if field.help_text %}
                  <small class="form-text text-muted">{{ field.help_text }}</small>
                {% endif %}
                {% if field.errors %}
                  <div class="text-danger small">{{ field.errors }}</div>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}


        
        <!-- reCAPTCHA -->
        <div class="mb-3 ">
            {{ form.captcha }}
            {% if form.captcha.errors %}
                <div class="text-danger small capt">Complete the CAPTCHA.</div>
            {% else %}
                <h5 class="caph5">You must complete the <b>CAPTCHA</b> to continue.</h5>
            {% endif %}
        </div>

          <div class="col-12 text-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Submit Registration</button>
          </div>

        </div>
      </form>
    </div>
  </div>
</div>

{% include 'footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    // ===== Phone input with country code =====
    const phoneInput = document.querySelector(".fone input");
    if (phoneInput) {
        const iti = window.intlTelInput(phoneInput, {
            initialCountry: "ng",
            separateDialCode: true,
            preferredCountries: ["ng","gh","us","gb","ca"],
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
        });
        const form = phoneInput.closest("form");
        if (form) {
            form.addEventListener("submit", function () {
                phoneInput.value = iti.getNumber();
            });
        }
    }

    // ===== Show "Other Position" input =====
    const jobPositionsOtherDiv = document.getElementById("job-positions-other");
    const jobPositionCheckboxes = document.querySelectorAll('input[name="job_positions"]');

    function toggleOtherField() {
        let otherChecked = false;
        jobPositionCheckboxes.forEach(cb => {
            if (cb.value === "other" && cb.checked) otherChecked = true;
        });
        if (jobPositionsOtherDiv) jobPositionsOtherDiv.style.display = otherChecked ? "block" : "none";
    }

    jobPositionCheckboxes.forEach(cb => cb.addEventListener("change", toggleOtherField));
    toggleOtherField();
});
</script>

</body>
</html>
